{
  "name": "Docker-raspberry-pi-blog",
  "tagline": "Docker on Raspberry Pi adventures",
  "body": "# Docker on the Raspberry PI\r\nThis page is intended to be a completely straight-forward, starting from scratch guide to getting Docker running on the Raspberry Pi and making it do some fun tricks.  It's an idea I've been interested in for a while, but most of the information in this space either relies on information from blog.hypriot.com or resin.io, both of which I've found issues with, so I've decided to create my own process based on \"from scratch\" findings and hopefully hightlight some gotchas along the way.\r\n\r\n## Issues with Resin.io\r\nResin.io is focused on creating a commercial product (nothing wrong with that) which allows you to remotely push Docker images to a set of devices deployed in the field.  For the purposes of learning Raspberry Pi and Docker, this adds a layer of abstraction to the heart of the problem and dependence on a web service.  At some point, I may be very interested in a service like this, but not for my current learning purposes.\r\n\r\n## Issues with Hypriot\r\nThese guys are awesome and I have learned a lot from them.  My issue is, their approach is mainly focused on using their own Linux images with Docker preinstalled.  While this is fine and works, it again, in my eyes adds a little bit of abstraction to the process, and makes the process of creating the initial SD card a bit more daunting.\r\n\r\n## My approach and why\r\nWhen I first began using Raspberry Pi, I had a lot of trouble understanding how to download an image, and burn it to an SD card.  For at least a week or so, I would try to follow some instructions, burn a card, stick it in my Pi and nothing happened.  Finally I got it right, and the screen lit up.  Eventually, the Raspberry Pi Foundation came up with the NOOBS (New Out Of Box Setup) distribution tool, and made this process a snap, and even gave you the ability to choose which operating system to install.\r\n\r\nMy approach is to use NOOBS to install a distribution of Linux called Arch Linux, which already has Docker (1.7 at the time of this writing) available to it's package manager.  This way, the process of getting started with Docker on the Raspberry Pi isn't all that much different that install an OS on Raspberry Pi the way a beginning user might normally go about it.\r\n\r\n## Caveats\r\n* At one point in time, the NOOBS tool offered several different choices of operating systems to install, including Raspbian, Arch Linux, OpenElec, etc.  At roughly the 1.4 release, they removed several of these choices, and only make Raspbian available.  While Raspbian is a great distribution, it doesn't not have Docker available in it's package manager.  To get around this issue, we'll download version 1.3.9 of the NOOBS distribution, and use it to install Arch Linux.  Once Arch Linux is installed, we'll perform a system update and then install Docker.  Let's get started!\r\n\r\nTODO(bradleybossard) - Fill in the steps below.\r\n## Download NOOBS v. 1.3.9\r\n\r\n## Unzip and install on an SD card.\r\n\r\n## Turn on PI and install Arch Linux\r\n\r\n## Reboot PI to Arch Linux\r\n\r\n## Log into Arch Linux, username: root, password: root\r\n\r\n## Change root password\r\n    passwd\r\n\r\n## Add a new user\r\n# add user to group users, startup with bash shell\r\n    useradd -m -g users -s /bin/bash <username>\r\n\r\n# change password for user\r\n    passwd <username>\r\n\r\n## Perform a system update\r\n\r\n# update all packages\r\n    pacman -Syu                 \r\n\r\n# update database are updating all packages\r\n    pacman-db-upgrade\r\n\r\n### Add rw to /boot/cmdline.txt before rebooting.  As root, type the following\r\n    nano /boot/cmdline.txt\r\n### And add the following to end the of the command line\r\n    rw\r\n### Such that your file might look something like this\r\n    ipv6.disable=1 avoid_safe_mode=1 selinux=0 plymouth.enable=0 smsc95xx.turbo_mode=N dwc_otg.lpm_enable=0 console=ttyAMA0,115200 kgdboc=ttyAMA0,115200 console=tty1 root=/dev/mmcblk0p6 rootfstype=ext4 elevator=noop rootwait rw\r\n### The reason this is important is, the pacman update/upgrade process, for some reason, removes this option when updating your commandline, and effectively turns your filesystem readonly, which makes it very difficult to do anything if you can't write files.  Make sure do this step and reboot the machine after you do.  If you don't do this and reboot, you'll get errors when trying to install new packages, for instance, that your filesystem is readonly.  \r\n\r\n## Optional step : Set up wifi\r\n    wifi-menu                    # follow instructions\r\n    netctl list                  # list wifi networks\r\n    netctl enable wlan0-[name]   # connect to wifi wlan0-[name] on boot\r\n\r\n## install Docker\r\n    pacman -S docker\r\n\r\n## start Docker daemon at boot\r\n    sudo systemctl enable docker\r\n\r\n# Optional step: Install OpenSSH and configure sshd\r\n    TODO(bradleybossard) : Add instructions and motivation for this step.\r\n\r\n## Reboot Pi\r\n    reboot\r\n\r\n## Log in, start 'docker -d' and run a docker test image\r\n    TODO(bradleybossard) : Provide instruction on these steps.\r\n\r\n    sudo docker pull resin/rpi-raspbian\r\n    sudo docker run -i -t --rm resin/rpi-raspbian bash",
  "google": "UA-52576926-1",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}